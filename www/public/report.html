<!DOCTYPE html>
<html>
<head>
	<title>Dsnap - Charts</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

	<link rel="stylesheet" href="css/sample1.css">

	<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js' ></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	
	<style>
	#xaxis .domain {
		fill:none;
		stroke:#000;
	}
	#xaxis text, #yaxis text {
		font-size: 12px;
	}
	</style>
	
</head>
<body>

	<div class='padding: 4px;' >
	<div class='h2' style='padding-left: 16px;' >Expense Report - Overview</div>
	<div class='h4' style='padding-left: 16px;' >Week of June 20, 2015</div>

	<div id="wrapper"></div>

	<div class='h4' style='padding-left: 16px; padding-top: 8px;' >
		* data is based on 2 adults, 3 children (3-5 years old and 12-14 years old)
	</div>


<script>
		/*
		var categories= ['', 'Accessories', 'Audiophile', 'Camera & Photo', 'Cell Phones', 'Computers','eBook Readers','Gadgets','GPS & Navigation','Home Audio','Office Electronics','Portable Audio','Portable Video','Security & Surveillance','Service','Television & Video','Car & Vehicle'];

		var dollars = [213,209,190,179,156,209,190,179,213,209,190,179,156,209,190,190];

		var colors = ['#F43F4F','#FFCC49','#F4476B','#ED2893','#7251BC','#008ED6','#00187B','#00A5DB','#009EA0','#00B27A','#BAD80A','#B5A80C','#D81E05','#0283AF','#79BCBF','#99C19E'];
		*/
		var categories= ['vegetables', 'meat', 'dairy', 'fruits', 'grain', 'drinks', 'snacks'];

		var dollars = [213,209,190,179,156,209,190];

		var colors = ['#F43F4F','#FFCC49','#F4476B','#ED2893','#7251BC','#008ED6','#00187B'];


		var grid = d3.range(25).map(function(i){
			return {'x1':0,'y1':0,'x2':0,'y2':480};
		});

		var tickVals = grid.map(function(d,i){
			if(i>0){ return i*10; }
			else if(i===0){ return "100";}
		});

		var xscale = d3.scale.linear()
						.domain([10,250])
						.range([0,722]);

		var yscale = d3.scale.linear()
						.domain([0,categories.length])
						.range([10,480]); // .range([0,480]);

		var colorScale = d3.scale.quantize()
						.domain([0,categories.length])
						.range(colors);

		var canvas = d3.select('#wrapper')
						.append('svg')
						.attr({'width':900,'height':505});

		var grids = canvas.append('g')
						  .attr('id','grid')
						  .attr('transform','translate(150,10)')
						  .selectAll('line')
						  .data(grid)
						  .enter()
						  .append('line')
						  .attr({'x1':function(d,i){ return i*30; },
								 'y1':function(d){ return d.y1; },
								 'x2':function(d,i){ return i*30; },
								 'y2':function(d){ return d.y2; },
							})
						  .style({'stroke':'#adadad','stroke-width':'1px'});

		var	xAxis = d3.svg.axis();
			xAxis
				.orient('bottom')
				.scale(xscale)
				.tickValues(tickVals);

		var	yAxis = d3.svg.axis();
			yAxis
				.orient('left')
				.scale(yscale)
				.tickSize(2)
				.tickFormat(function(d,i){ return categories[i]; })
				.tickValues(d3.range(17));

		var y_xis = canvas.append('g')
						  .attr("transform", "translate(150,0)")
						  .attr('id','yaxis')
						  .call(yAxis);

		var x_xis = canvas.append('g')
						  .attr("transform", "translate(150,480)")
						  .attr('id','xaxis')
						  .call(xAxis);

		var chart = canvas.append('g')
							//.attr("transform", "translate(150,-20)")
							.attr("transform", "translate(150,0)")
							.attr('id','bars')
							.selectAll('rect')
							.data(dollars)
							.enter()
							.append('rect')
							.attr('height',19)
							//.attr({'x':0,'y':function(d,i){ return yscale(i)+19; }})
							.attr({'x':0,'y':function(d,i){ return yscale(i); }})
							.style('fill',function(d,i){ return colorScale(i); })
							.attr('width',function(d){ return 0; });


		var transit = d3.select("svg").selectAll("rect")
						    .data(dollars)
						    .transition()
						    .duration(1000) 
						    .attr("width", function(d) {return xscale(d); });

		var transitext = d3.select('#bars')
							.selectAll('text')
							.data(dollars)
							.enter()
							.append('text')
							//.attr({'x':function(d) {return xscale(d)-200; },'y':function(d,i){ return yscale(i)+35; }})
							.attr({'x':function(d) {return xscale(d)-200; },'y':function(d,i){ return yscale(i)+15; }})
							.text(function(d){ return d+"$"; }).style({'fill':'#fff','font-size':'14px'});


	</script>		
</body>
</html>